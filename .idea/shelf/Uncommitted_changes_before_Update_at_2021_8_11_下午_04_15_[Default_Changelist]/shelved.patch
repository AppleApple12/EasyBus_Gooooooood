Index: app/src/main/java/com/example/easybus/Page61.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonArrayRequest;\r\nimport com.android.volley.toolbox.Volley;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class Page61 extends AppCompatActivity {\r\n    //\r\n    Page61Holder myAdapter;\r\n    static ArrayList<HashMap<String,String>> arrayList1 = new ArrayList<>();\r\n    static ArrayList<HashMap<String,Integer>> arrayList2 = new ArrayList<>();\r\n    RecyclerView recyclerView,mrecyclerView;\r\n    String getmail;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page61);\r\n        //抓取email\r\n        SharedPreferences email = getSharedPreferences(\"email\",MODE_PRIVATE);\r\n        getmail=email.getString(\"Email\",\"\");\r\n        //隱藏title bar\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();\r\n        //跳回主頁\r\n        ImageButton btn2 = (ImageButton)findViewById(R.id.back);\r\n        btn2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it1 = new Intent(Page61.this,Page3Activity.class);\r\n                startActivity(it1);\r\n                arrayList1.clear();\r\n                arrayList2.clear();\r\n            }\r\n        });\r\n\r\n\r\n\r\n        int image[] = {R.drawable.busdetails,R.drawable.business,R.drawable.waitingbus};\r\n        final String text[] = {\" 公  車  查  詢 \",\"   上    班   \",\"   搭    車   \"};\r\n        for(int i = image.length-1;i>=0;i--){\r\n            HashMap<String,String> hashMap = new HashMap<>();\r\n            hashMap.put(\"busname\",text[i]);\r\n            arrayList1.add(hashMap);\r\n            HashMap<String,Integer> hashMap2 = new HashMap<>();\r\n            hashMap2.put(\"busphoto\",image[i]);\r\n            arrayList2.add(hashMap2);\r\n        }///\r\n        recyclerView = findViewById(R.id.recyclerview);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        //recyclerView.addItemDecoration(new DividerItemDecoration(this,DividerItemDecoration.VERTICAL));\r\n        myAdapter = new Page61Holder();\r\n        recyclerView.setAdapter(myAdapter);\r\n        myAdapter.setOnItemClick(new Page61Holder.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(View view, int position) {\r\n                if(arrayList1.get(position).get(\"busname\").equals(\" 公  車  查  詢 \")){\r\n                    Intent it1 = new Intent(Page61.this,Page6Activity.class);\r\n                    startActivity(it1);\r\n                    arrayList1.clear();\r\n                    arrayList2.clear();\r\n                }else if (arrayList1.get(position).get(\"busname\").equals(\"   上    班   \")){\r\n                    Intent it1 = new Intent(Page61.this,Page62.class);\r\n                    startActivity(it1);\r\n                    arrayList1.clear();\r\n                    arrayList2.clear();\r\n                }else{\r\n                    Intent it1 = new Intent(Page61.this,take_bus.class);\r\n                    startActivity(it1);\r\n                    arrayList1.clear();\r\n                    arrayList2.clear();\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page61.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Page61.java	(date 1628668510766)
@@ -24,6 +24,7 @@
 import com.android.volley.Response;
 import com.android.volley.VolleyError;
 import com.android.volley.toolbox.JsonArrayRequest;
+import com.android.volley.toolbox.StringRequest;
 import com.android.volley.toolbox.Volley;
 
 import org.json.JSONArray;
@@ -39,8 +40,13 @@
     Page61Holder myAdapter;
     static ArrayList<HashMap<String,String>> arrayList1 = new ArrayList<>();
     static ArrayList<HashMap<String,Integer>> arrayList2 = new ArrayList<>();
-    RecyclerView recyclerView,mrecyclerView;
+    RecyclerView recyclerView;
     String getmail;
+    List<take_bus_businfo> takeBusBusinfoList;
+
+    take_bus_Adapter take_bus_adapter;
+    RecyclerView mrecyclerView;
+
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -103,6 +109,46 @@
 
             }
         });
+        mrecyclerView=findViewById(R.id.take_bus_list);
+        mrecyclerView.setHasFixedSize(true);
+        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false);
+        mrecyclerView.setLayoutManager(linearLayoutManager);
+        takeBusBusinfoList = new ArrayList<>();
+        String URL =Urls.url1+"/LoginRegister/fetchbusinfo.php?email="+getmail;
+        //Request.Method.GET,URL,null我自己加的
+        StringRequest stringrequest = new StringRequest(Request.Method.GET,URL,
+                new Response.Listener<String>() {
+                    @Override
+                    public void onResponse(String reponse) {//////
+
+                        try {
+                            JSONArray array =new JSONArray(reponse);
+                            for(int i =0;i<array.length();i++){
+                                JSONObject object = array.getJSONObject(i);
+
+                                String routename = object.getString("routename").trim();
+                                String image = object.getString("image").trim();
+
+                                take_bus_businfo b =new take_bus_businfo();
+                                b.setRoutename(routename);
+                                b.setImage(image);
+                                takeBusBusinfoList.add(b);
+
+                            }
+                        } catch (JSONException e) {
+                            e.printStackTrace();
+                        }
+                        take_bus_adapter = new take_bus_Adapter(Page61.this,takeBusBusinfoList);
+                        mrecyclerView.setAdapter(take_bus_adapter);
+
+                    }
+                }, new Response.ErrorListener() {
+            @Override
+            public void onErrorResponse(VolleyError error) {
+                Toast.makeText(Page61.this, error.toString(), Toast.LENGTH_SHORT).show();
+            }
+        });
+        Volley.newRequestQueue(Page61.this).add(stringrequest);
     }
+}
 
-}
\ No newline at end of file
Index: app/src/main/java/com/example/easybus/Page61Holder.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\npublic class Page61Holder extends RecyclerView.Adapter<Page61Holder.ViewHolder>{\r\n    OnItemClickListener listener;\r\n    @NonNull\r\n    @Override\r\n    public Page61Holder.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.recyclerview03,parent,false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull Page61Holder.ViewHolder holder, final int position) {\r\n        holder.imageView.setImageResource(Page61.arrayList2.get(position).get(\"busphoto\"));\r\n        holder.txv.setText(Page61.arrayList1.get(position).get(\"busname\"));\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (listener!=null){\r\n                    listener.onItemClick(v,position);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return Page61.arrayList1.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        private ImageView imageView;\r\n        private TextView txv;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            imageView = itemView.findViewById(R.id.imageView);\r\n            txv = itemView.findViewById(R.id.txv);\r\n        }\r\n    }\r\n\r\n    public interface OnItemClickListener{\r\n        void onItemClick(View view,int position);\r\n    }\r\n    public void setOnItemClick(Page61Holder.OnItemClickListener listener){\r\n        this.listener = listener;\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page61Holder.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Page61Holder.java	(date 1628584613014)
@@ -9,8 +9,11 @@
 import androidx.annotation.NonNull;
 import androidx.recyclerview.widget.RecyclerView;
 
+import com.squareup.picasso.Picasso;
+
 public class Page61Holder extends RecyclerView.Adapter<Page61Holder.ViewHolder>{
     OnItemClickListener listener;
+    String img;
     @NonNull
     @Override
     public Page61Holder.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
Index: app/src/main/java/com/example/easybus/Page5012Activity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.ColorMatrix;\r\nimport android.graphics.ColorMatrixColorFilter;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.util.Base64;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.StringRequest;\r\nimport com.android.volley.toolbox.Volley;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class Page5012Activity extends AppCompatActivity {\r\n    //12345\r\n    private static final String DIRECTION_URL_API = \"https://maps.googleapis.com/maps/api/directions/json?\";\r\n    private static final String GOOGLE_API_KEY = \"AIzaSyCr_-3KbvHxSm9Gb38l7M2E_b8qzwHhcTI\";\r\n    String url,urlOrigin,urlDestination,title2,getmail;\r\n    ImageView mImg,mBack,mAdd;\r\n    RecyclerView recyclerView;\r\n    BusInfoAdaptor adaptor;//\r\n    ArrayList<BusInfo> businfos;\r\n    RequestQueue requestQueue,requestQueue1;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page5012);\r\n\r\n        //隱藏title bar\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();\r\n\r\n        //取值(origin,destination)\r\n        Bundle bundle = getIntent().getExtras();\r\n        urlOrigin= bundle.getString(\"origin2\");\r\n        urlDestination= bundle.getString(\"destination2\");\r\n\r\n        url=DIRECTION_URL_API+\"origin=\"+urlOrigin+\"&destination=\"+urlDestination+\"&mode=transit&transit_mode=bus&language=zh-TW&key=\"+GOOGLE_API_KEY;\r\n\r\n        mImg=findViewById(R.id.img);\r\n        mBack=findViewById(R.id.backicon);\r\n        mAdd=findViewById(R.id.addIcon);\r\n        recyclerView=findViewById(R.id.busInfo);\r\n\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        adaptor=new BusInfoAdaptor();\r\n        recyclerView.setAdapter(adaptor);\r\n        businfos=new ArrayList<>();\r\n        getData();\r\n        SharedPreferences email = getSharedPreferences(\"email\",MODE_PRIVATE);\r\n        getmail=email.getString(\"Email\",\"\");\r\n        requestQueue = Volley.newRequestQueue(this);\r\n        requestQueue1 = Volley.newRequestQueue(this);\r\n\r\n        mAdd.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //實例化mPopupWindow\r\n                popupWindow popupWin=new popupWindow(Page5012Activity.this);\r\n                View view= LayoutInflater.from(Page5012Activity.this).inflate(R.layout.page5012popupwindow,null);\r\n                //設計彈出框\r\n                popupWin.showAtLocation(view,Gravity.CENTER,0,0);\r\n\r\n            }\r\n        });\r\n\r\n        mBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getData() { //抓公車JSON\r\n        final ProgressDialog progressDialog=new ProgressDialog(this);\r\n        progressDialog.setMessage(\"載入中...\");\r\n        progressDialog.show();\r\n\r\n        final JsonObjectRequest jsonObjectRequest=new JsonObjectRequest(url,null, new Response.Listener<JSONObject>() {\r\n            @Override\r\n            public void onResponse(JSONObject response) {\r\n                try{\r\n                    JSONArray ArrayRoutes = response.getJSONArray(\"routes\");\r\n                    JSONArray ArrayLegs =ArrayRoutes.getJSONObject(0).getJSONArray(\"legs\");\r\n                    JSONArray ArraySteps =ArrayLegs.getJSONObject(0).getJSONArray(\"steps\");\r\n\r\n                    for(int i=0;i<ArraySteps.length();i++){\r\n                        JSONObject ObjSteps=ArraySteps.getJSONObject(i);\r\n                        String travelMode=ObjSteps.getString(\"travel_mode\");\r\n                        BusInfo businfo=new BusInfo();\r\n\r\n                        if (travelMode.equals(\"WALKING\")) {\r\n                            String Htmlinstructions=ObjSteps.getString(\"html_instructions\");\r\n                            businfo.setHtmlinstructions(Htmlinstructions.substring(3));\r\n                            businfo.setShortname(null);\r\n                            businfo.setPic(1);\r\n                        }else{\r\n                            businfo.setHtmlinstructions (ObjSteps.getJSONObject(\"transit_details\").getJSONObject(\"arrival_stop\").getString(\"name\"));\r\n                            businfo.setShortname(ObjSteps.getJSONObject(\"transit_details\").getJSONObject(\"line\").getString(\"short_name\"));\r\n                            businfo.setPic(0);\r\n                        }\r\n                        businfos.add(businfo);\r\n                    }\r\n                }catch (JSONException e){\r\n                    Toast.makeText(Page5012Activity.this,e.getMessage()+\"錯誤1\",Toast.LENGTH_LONG).show();\r\n                }\r\n                adaptor.setData(businfos);\r\n                adaptor.notifyDataSetChanged();\r\n                progressDialog.dismiss();\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                progressDialog.dismiss();\r\n                Toast.makeText(Page5012Activity.this,\"發生錯誤1111!\",Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n\r\n        RequestQueue requestQueue= Volley.newRequestQueue(this);\r\n        requestQueue.add(jsonObjectRequest);\r\n    }\r\n\r\n    //標題popupwindow\r\n    public class popupWindow extends PopupWindow implements View.OnClickListener {\r\n        View view;\r\n        EditText mTitle;\r\n        TextView mNext;\r\n\r\n        public popupWindow(Context mContext) {\r\n            //動態頁面載入\r\n            view = LayoutInflater.from(mContext).inflate(R.layout.page5012popupwindow, null);\r\n            mTitle = view.findViewById(R.id.title);\r\n            mNext = view.findViewById(R.id.next);\r\n            //下一步前檢查是否有輸入標題\r\n            mNext.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    TitleRequest(); //檢查標題是否為空\r\n                }\r\n            });\r\n            //設置PopupWindow的View\r\n            this.setContentView(view);\r\n            //設置PopupWindow彈出框的高\r\n            this.setHeight(RelativeLayout.LayoutParams.MATCH_PARENT);\r\n            //設置PopupWindow彈出框的寬\r\n            this.setWidth(RelativeLayout.LayoutParams.MATCH_PARENT);\r\n            //設置mPopupWindow彈出框可點擊\r\n            this.setFocusable(true);\r\n            //實例化一個ColorDrawable顏色為半透明\r\n            ColorDrawable dw = new ColorDrawable(0xb0000000);\r\n            //設置PopupWindow彈出框的背景\r\n            this.setBackgroundDrawable(dw);\r\n            //設置PopupWindow點框外銷毀\r\n            this.setOutsideTouchable(true);\r\n            view.setOnTouchListener(new View.OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View v, MotionEvent motionEvent) {\r\n                    int top=view.findViewById(R.id.img).getTop();\r\n                    int bottom=view.findViewById(R.id.img).getBottom();\r\n                    int left=view.findViewById(R.id.img).getLeft();\r\n                    int right=view.findViewById(R.id.img).getRight();\r\n                    int y=(int)motionEvent.getY();\r\n                    int x=(int)motionEvent.getX();\r\n                    if (motionEvent.getAction()==MotionEvent.ACTION_UP){\r\n                        if (y<top || y>bottom || x<left || x>right)\r\n                            dismiss();\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n        @Override\r\n        public void onClick(View V) {\r\n        }\r\n\r\n        //檢查標題是否為空(如不是:選擇圖片)\r\n        public void TitleRequest(){\r\n            title2=mTitle.getText().toString().trim();\r\n            if (title2.isEmpty()){\r\n                Toast.makeText(Page5012Activity.this, \"請輸入標題\", Toast.LENGTH_LONG).show();\r\n                return;\r\n            }else{  //選擇圖片popupwindow\r\n                //銷毀第一個popupwindow\r\n\r\n                dismiss();\r\n                //實例化PopupPhoto\r\n                popupSelPhoto popupPhoto=new popupSelPhoto(Page5012Activity.this);\r\n                View v=LayoutInflater.from(Page5012Activity.this).inflate(R.layout.page5012popupphoto,null);\r\n                //設計彈出框\r\n                popupPhoto.showAtLocation(v,Gravity.CENTER,0,0);\r\n                //title2=popupPhoto.title;\r\n                popupPhoto.title=title2;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    //標題popupSelPhoto\r\n    public class popupSelPhoto extends PopupWindow implements View.OnClickListener{\r\n        View v;\r\n        ImageView mWork,mHome,mPlay,mShopping,mSaveImg;\r\n        int choose=0;\r\n        String title,img = \"\";\r\n        public popupSelPhoto(Context mContext2) {\r\n            //動態頁面載入\r\n            v = LayoutInflater.from(mContext2).inflate(R.layout.page5012popupphoto, null);\r\n\r\n            mWork=v.findViewById(R.id.work);\r\n            mHome=v.findViewById(R.id.home);\r\n            mPlay=v.findViewById(R.id.play);\r\n            mShopping=v.findViewById(R.id.shopping);\r\n            mSaveImg=v.findViewById(R.id.saveImg);\r\n\r\n            //設置PopupWindow的View\r\n            this.setContentView(v);\r\n            //設置PopupWindow彈出框的高\r\n            this.setHeight(RelativeLayout.LayoutParams.MATCH_PARENT);\r\n            //設置PopupWindow彈出框的寬\r\n            this.setWidth(RelativeLayout.LayoutParams.MATCH_PARENT);\r\n            //設置mPopupWindow彈出框可點擊\r\n            this.setFocusable(true);\r\n            //實例化一個ColorDrawable顏色為半透明\r\n            ColorDrawable dw = new ColorDrawable(0xb0000000);\r\n            //設置PopupWindow彈出框的背景\r\n            this.setBackgroundDrawable(dw);\r\n            //設置PopupWindow點框外銷毀\r\n            this.setOutsideTouchable(true);\r\n            v.setOnTouchListener(new View.OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View view, MotionEvent motionEvent) {\r\n                    int height=v.findViewById(R.id.selphotobg).getHeight();\r\n                    int y=(int)motionEvent.getY();\r\n                    if (motionEvent.getAction()==MotionEvent.ACTION_UP){\r\n                        if (y<height){\r\n                            dismiss();\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            mWork.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    choose=1;\r\n                    if (choose==1){\r\n                        mWork.setImageResource(R.drawable.working1);\r\n                        mHome.setImageResource(R.drawable.home);\r\n                        mPlay.setImageResource(R.drawable.play);\r\n                        mShopping.setImageResource(R.drawable.shopping);\r\n                        img = \"work\";\r\n                    }\r\n                }\r\n            });\r\n\r\n            mHome.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    choose=2;\r\n                    if (choose==2){\r\n                        mHome.setImageResource(R.drawable.home1);\r\n                        mWork.setImageResource(R.drawable.working);\r\n                        mPlay.setImageResource(R.drawable.play);\r\n                        mShopping.setImageResource(R.drawable.shopping);\r\n                        img = \"home\";\r\n                    }\r\n                }\r\n            });\r\n\r\n            mPlay.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    choose=3;\r\n                    if (choose==3){\r\n                        mPlay.setImageResource(R.drawable.play1);\r\n                        mWork.setImageResource(R.drawable.working);\r\n                        mHome.setImageResource(R.drawable.home);\r\n                        mShopping.setImageResource(R.drawable.shopping);\r\n                        img = \"play\";\r\n                    }\r\n                }\r\n            });\r\n\r\n            mShopping.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    choose=4;\r\n                    if (choose==4){\r\n                        mShopping.setImageResource(R.drawable.shopping1);\r\n                        mWork.setImageResource(R.drawable.working);\r\n                        mHome.setImageResource(R.drawable.home);\r\n                        mPlay.setImageResource(R.drawable.play);\r\n                        img = \"shopping\";\r\n                    }\r\n                }\r\n            });\r\n\r\n            mSaveImg.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    choose+=1;\r\n                    if (choose>=2 && choose<=5){ //有選擇照片\r\n                        System.out.println(urlDestination);\r\n                        System.out.println(\"title : \"+title);\r\n                        System.out.println(urlOrigin);\r\n                        dismiss();\r\n                        //將資訊存入資料庫\r\n                        savebusinfo(getmail,title,urlOrigin,urlDestination,img);\r\n\r\n                        System.out.println(img);\r\n                        Toast.makeText(Page5012Activity.this,\"路線儲存成功！\",Toast.LENGTH_LONG).show();\r\n                    }else{ //沒有選照片\r\n                        Toast.makeText(Page5012Activity.this,\"請選擇圖片！\",Toast.LENGTH_LONG).show();\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        @Override\r\n        public void onClick(View view) {\r\n        }\r\n        public void savebusinfo(final String email,final String routename,final String origin,final String destination,final String img) {\r\n            String URL = Urls.url1+\"/LoginRegister/save_businfo.php\";//\r\n            StringRequest stringRequest = new StringRequest(\r\n                    Request.Method.POST,\r\n                    URL,\r\n                    new Response.Listener<String>() {\r\n                        @Override\r\n                        public void onResponse(String response) {\r\n                            if(response.equals(\"Success\")){\r\n                                finish();\r\n                            }\r\n                        }\r\n                    },\r\n                    new Response.ErrorListener() {\r\n                        @Override\r\n                        public void onErrorResponse(VolleyError error) {\r\n                            Toast.makeText(Page5012Activity.this, error.toString(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n            ) {\r\n                @Nullable\r\n                @Override\r\n                protected Map<String, String> getParams() throws AuthFailureError {\r\n                    Map<String, String> parms = new HashMap<>();\r\n                    parms.put(\"email\",email);\r\n                    parms.put(\"routename\",routename);\r\n                    parms.put(\"origin\",origin);\r\n                    parms.put(\"destination\",destination);\r\n                    parms.put(\"image\",img);\r\n                    return parms;\r\n                }\r\n            };\r\n            requestQueue1.add(stringRequest);\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page5012Activity.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Page5012Activity.java	(date 1628664701720)
@@ -342,7 +342,6 @@
                         dismiss();
                         //將資訊存入資料庫
                         savebusinfo(getmail,title,urlOrigin,urlDestination,img);
-
                         System.out.println(img);
                         Toast.makeText(Page5012Activity.this,"路線儲存成功！",Toast.LENGTH_LONG).show();
                     }else{ //沒有選照片
Index: app/src/main/res/layout/activity_page61.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Page61\"\r\n    android:background=\"#ffffff\">\r\n\r\n    <View\r\n        android:id=\"@+id/top\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"95dp\"\r\n        android:background=\"@drawable/round_button\"\r\n        android:visibility=\"visible\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <ImageButton\r\n        android:id=\"@+id/back\"\r\n        android:layout_width=\"85dp\"\r\n        android:layout_height=\"85dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:scaleType=\"fitCenter\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/top\"\r\n        app:layout_constraintHorizontal_bias=\"0.009\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:srcCompat=\"@drawable/back\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/iv1\"\r\n        android:layout_width=\"275dp\"\r\n        android:layout_height=\"64dp\"\r\n        android:layout_marginTop=\"16dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.395\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/back\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:srcCompat=\"@drawable/page5up\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/iv2\"\r\n        android:layout_width=\"47dp\"\r\n        android:layout_height=\"47dp\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginLeft=\"24dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/iv1\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/iv1\"\r\n        app:srcCompat=\"@drawable/ic_page6\" />\r\n\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/txvtop\"\r\n        android:layout_width=\"142dp\"\r\n        android:layout_height=\"45dp\"\r\n        android:text=\"   搭  車   \"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"33sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/iv1\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/iv1\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/iv2\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/iv1\" />\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerview\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"630dp\"\r\n        android:background=\"#ffffff\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/top\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_page61.xml	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/res/layout/activity_page61.xml	(date 1628668464537)
@@ -69,12 +69,27 @@
 
     <androidx.recyclerview.widget.RecyclerView
         android:id="@+id/recyclerview"
-        android:layout_width="match_parent"
-        android:layout_height="630dp"
+
+        android:layout_width="394dp"
+        android:layout_height="324dp"
         android:background="#ffffff"
+
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
         app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/top" />
+        app:layout_constraintTop_toBottomOf="@+id/top"
+        app:layout_constraintVertical_bias="0.0" />
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/take_bus_list"
+        android:layout_width="387dp"
+        android:layout_height="365dp"
+        android:layout_marginTop="8dp"
+        android:background="#ffffff"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/recyclerview" />
 
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/easybus/Page5011Activity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.BitmapDescriptorFactory;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.Marker;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.maps.model.Polyline;\r\nimport com.google.android.gms.maps.model.PolylineOptions;\r\n\r\nimport java.io.IOException;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport tw.edu.pu.s1071481.module.DirectionFinder;\r\nimport tw.edu.pu.s1071481.module.DirectionFinderListener;\r\nimport tw.edu.pu.s1071481.module.Route;\r\n\r\npublic class Page5011Activity extends FragmentActivity implements OnMapReadyCallback, DirectionFinderListener{\r\n\r\n    String origin,destination;\r\n    private static final String TAG = \"Page5011Activity\";\r\n    private GoogleMap mMap;\r\n    private EditText mEtOrigin,mEtDestination;\r\n    private ImageButton mBtnFindPath,mBusInfo;\r\n    private ProgressDialog progressDialog;\r\n    private List<Marker> originMarkers = new ArrayList<>();\r\n    private List<Marker> destinationMarkers = new ArrayList<>();\r\n    private List<Polyline> polylinePaths = new ArrayList<>();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page5011);\r\n\r\n        mBtnFindPath=(ImageButton)findViewById(R.id.btnFindPath);\r\n        mBusInfo=(ImageButton)findViewById(R.id.busInfo);\r\n        mEtOrigin=(EditText)findViewById(R.id.etOrigin);\r\n        mEtDestination=(EditText)findViewById(R.id.etDestination);\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.mapView);\r\n        mapFragment.getMapAsync(this);\r\n\r\n        mBtnFindPath.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                sendRequest();\r\n            }\r\n        });\r\n        mBusInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                sendRequest2();\r\n            }\r\n        });\r\n    }\r\n\r\n    public void sendRequest(){\r\n        origin = mEtOrigin.getText().toString().trim();\r\n        destination = mEtDestination.getText().toString().trim();\r\n        if(origin.isEmpty()){\r\n            Toast.makeText(this, \"請輸入起點\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }else if(destination.isEmpty()){\r\n            Toast.makeText(this, \"請輸入目的地\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        try{\r\n            new DirectionFinder(this,origin,destination).execute();\r\n        }catch(UnsupportedEncodingException e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void sendRequest2(){\r\n        origin = mEtOrigin.getText().toString().trim();\r\n        destination = mEtDestination.getText().toString().trim();\r\n        if(origin.isEmpty()){\r\n            Toast.makeText(this, \"請輸入起點\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }else if(destination.isEmpty()){\r\n            Toast.makeText(this, \"請輸入目的地\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        try{\r\n            Intent it=new Intent(Page5011Activity.this,Page5012Activity.class);\r\n            Bundle bundle = new Bundle();\r\n            //傳值(origin,destination)\r\n            bundle.putString(\"origin2\",origin);\r\n            bundle.putString(\"destination2\",destination);\r\n            it.putExtras(bundle);\r\n            startActivity(it);\r\n        }catch(Exception e){\r\n            Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n\r\n        // Add a marker in Sydney and move the camera\r\n        LatLng school = new LatLng(24.225431, 120.577063);\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(school,18));\r\n        originMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                .title(\"靜宜大學\")\r\n                .position(school)));\r\n\r\n        mMap.getUiSettings().setZoomControlsEnabled(true);  //右下角的放大縮小功能\r\n        mMap.getUiSettings().setCompassEnabled(true);   //左上角的指南針，要兩指旋轉\r\n        mMap.getUiSettings().setMapToolbarEnabled(true);    //右下角的導覽及開啟Google Map功能\r\n\r\n        Log.d(TAG,\"最高放大層級：\"+mMap.getMaxZoomLevel());\r\n        Log.d(TAG,\"最低放大層級：\"+mMap.getMinZoomLevel());\r\n        if(ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this,Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED){\r\n            return;\r\n        }\r\n\r\n        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);\r\n        mMap.setMyLocationEnabled(true);    //右上角的定位功能\r\n    }\r\n\r\n    public void onDirectionFinderStart(){\r\n        progressDialog=ProgressDialog.show(this,\"請稍等\",\"正在規劃路線...\",true);\r\n\r\n        if(originMarkers != null){\r\n            for(Marker marker:originMarkers){\r\n                marker.remove();\r\n            }\r\n        }\r\n        if(destinationMarkers != null){\r\n            for(Marker marker:destinationMarkers){\r\n                marker.remove();\r\n            }\r\n        }\r\n        if(polylinePaths != null){\r\n            for(Polyline polyline:polylinePaths){\r\n                polyline.remove();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDirectionFinderSuccess(List<Route> routes) {\r\n        progressDialog.dismiss();\r\n        polylinePaths=new ArrayList<>();\r\n        originMarkers=new ArrayList<>();\r\n        destinationMarkers=new ArrayList<>();\r\n\r\n        for(Route route:routes){\r\n            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(route.startLocation,16));\r\n\r\n            originMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                    .title(route.startAddress)\r\n                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.a))\r\n                    .position(route.startLocation)));\r\n\r\n            destinationMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                    .title(route.endAddress)\r\n                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.b))\r\n                    .position(route.endLocation)));\r\n\r\n            PolylineOptions polylineOptions=new PolylineOptions().\r\n                    geodesic(true).color(Color.BLUE).width(10);\r\n\r\n            for(int i=0;i<route.points.size();i++)\r\n                polylineOptions.add(route.points.get(i));\r\n\r\n            polylinePaths.add(mMap.addPolyline(polylineOptions));\r\n        }\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page5011Activity.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Page5011Activity.java	(date 1628664403095)
@@ -4,8 +4,10 @@
 import androidx.fragment.app.FragmentActivity;
 
 import android.Manifest;
+import android.app.ActionBar;
 import android.app.ProgressDialog;
 import android.content.Intent;
+import android.content.SharedPreferences;
 import android.content.pm.PackageManager;
 import android.graphics.Color;
 import android.os.Bundle;
@@ -38,7 +40,7 @@
 
 public class Page5011Activity extends FragmentActivity implements OnMapReadyCallback, DirectionFinderListener{
 
-    String origin,destination;
+    String origin,destination,getmail;
     private static final String TAG = "Page5011Activity";
     private GoogleMap mMap;
     private EditText mEtOrigin,mEtDestination;
@@ -51,8 +53,12 @@
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
+
         setContentView(R.layout.activity_page5011);
 
+        SharedPreferences email = getSharedPreferences("email",MODE_PRIVATE);
+        getmail=email.getString("Email","");
+
         mBtnFindPath=(ImageButton)findViewById(R.id.btnFindPath);
         mBusInfo=(ImageButton)findViewById(R.id.busInfo);
         mEtOrigin=(EditText)findViewById(R.id.etOrigin);
Index: app/src/main/java/com/example/easybus/Page3Activity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.telecom.Call;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.Request;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.snackbar.Snackbar;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\npublic class Page3Activity extends AppCompatActivity {\r\n    String email,getmail;\r\n    RequestQueue requestQueue;\r\n    com.example.easybus.FloatingActionButton f;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page3);\r\n\r\n        requestQueue = Volley.newRequestQueue(this);\r\n        getmail = mail();\r\n        //隱藏title bar\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();\r\n\r\n        //跳頁到新增路線\r\n        Button btn1 = (Button)findViewById(R.id.btn1);\r\n        btn1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it1 = new Intent(Page3Activity.this,Page5011Activity.class);\r\n                it1.putExtra(\"email\",getmail);\r\n                startActivity(it1);\r\n            }\r\n        });\r\n\r\n        //跳頁到搭車\r\n        Button btn2 = (Button)findViewById(R.id.btn2);\r\n        btn2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it2 = new Intent(Page3Activity.this,Page61.class);\r\n                it2.putExtra(\"email\",getmail);\r\n                startActivity(it2);\r\n            }\r\n        });\r\n\r\n        //跳頁到注意事項\r\n        Button btn3 = (Button)findViewById(R.id.btn3);\r\n        btn3.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it3 = new Intent(Page3Activity.this,Page7Activity.class);\r\n                it3.putExtra(\"email\",getmail);\r\n                startActivity(it3);\r\n            }\r\n        });\r\n\r\n        //跳頁到我的帳戶\r\n        Button btn4 = (Button)findViewById(R.id.btn4);\r\n        btn4.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it4 = new Intent(Page3Activity.this,Page8Activity.class);\r\n                it4.putExtra(\"email\",getmail);\r\n                // Toast.makeText(Page3Activity.this, getmail, Toast.LENGTH_SHORT).show();\r\n                startActivity(it4);\r\n            }\r\n        });\r\n\r\n        //浮動按鈕撥打給緊急聯絡人\r\n        FloatingActionButton fab = (FloatingActionButton)findViewById(R.id.fab);\r\n        fab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                readUser();\r\n            }\r\n        });\r\n    }\r\n\r\n    @SuppressLint(\"LongLogTag\")\r\n    protected void makeCall(final String phone) {\r\n        //Snackbar.make(v,\"打電話給緊急連絡人\",Snackbar.LENGTH_LONG).setAction(\"Action\",null).show();\r\n        Intent call = new Intent(Intent.ACTION_DIAL);\r\n        Uri u = Uri.parse(\"tel:\"+phone);\r\n        call.setData(u);\r\n\r\n        try {\r\n            startActivity(call);\r\n            finish();\r\n            Log.i(\"Finished making a call...\", \"\");\r\n        } catch (android.content.ActivityNotFoundException ex) {\r\n            Toast.makeText(Page3Activity.this, ex.toString(), Toast.LENGTH_SHORT).show();\r\n            Toast.makeText(Page3Activity.this,\r\n                    \"Call faild, please try again later.\", Toast.LENGTH_SHORT).show();\r\n        }\r\n        //startActivity(call        );\r\n    }\r\n    public void readUser(){\r\n        String URL =Urls.url1+\"/LoginRegister/fetch.php?email=\"+getmail;\r\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(\r\n                Request.Method.GET,\r\n                URL,\r\n                null,\r\n                new Response.Listener<JSONObject>() {\r\n                    String emergency_phone;\r\n                    @Override\r\n                    public void onResponse(JSONObject response) {\r\n                        try {\r\n                            emergency_phone = response.getString(\"emergency_contact\");\r\n                            makeCall(emergency_phone);\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                            Toast.makeText(Page3Activity.this, e.toString(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                },\r\n                new Response.ErrorListener() {\r\n                    @Override\r\n                    public void onErrorResponse(VolleyError error) {\r\n                        Toast.makeText(Page3Activity.this, error.toString(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n        );\r\n        requestQueue.add(jsonObjectRequest);\r\n    }\r\n    public String mail(){\r\n        Bundle extras = getIntent().getExtras();\r\n        if (extras!=null){\r\n            email=extras.getString(\"email\");\r\n        }\r\n        return email;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page3Activity.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Page3Activity.java	(date 1628664478377)
@@ -5,6 +5,7 @@
 
 import android.annotation.SuppressLint;
 import android.content.Intent;
+import android.content.SharedPreferences;
 import android.net.Uri;
 import android.os.Bundle;
 import android.telecom.Call;
@@ -35,7 +36,8 @@
         setContentView(R.layout.activity_page3);
 
         requestQueue = Volley.newRequestQueue(this);
-        getmail = mail();
+        SharedPreferences email = getSharedPreferences("email",MODE_PRIVATE);
+        getmail=email.getString("Email","");
         //隱藏title bar
         ActionBar actionBar = getSupportActionBar();
         actionBar.hide();
@@ -141,11 +143,5 @@
         );
         requestQueue.add(jsonObjectRequest);
     }
-    public String mail(){
-        Bundle extras = getIntent().getExtras();
-        if (extras!=null){
-            email=extras.getString("email");
-        }
-        return email;
-    }
+
 }
\ No newline at end of file
Index: app/src/main/java/com/example/easybus/Urls.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\nimport java.net.InetAddress;\r\nimport java.net.UnknownHostException;\r\n\r\npublic class Urls {\r\n    //private static InetAddress ip;/////urllll\r\n    public static String url1 = \"http://172.20.10.3\";\r\n    //public static String url1 = \"http://8c708b26959c.ngrok.io\";\r\n    public static void main(String args[]) {\r\n\r\n        /*try {\r\n            ip = InetAddress.getLocalHost();\r\n            System.out.println(ip.getHostAddress());\r\n        } catch (UnknownHostException e) {\r\n            e.printStackTrace();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }*/\r\n\r\n\r\n\r\n    }\r\n    //static String ROOT_URL = url1+url2+url3;\r\n    //static String FORGOT_PASSWORD_URL = \"http://192.168.27.107/LoginRegister/\" + \"forgot.php\";\r\n//搞不清楚 你不是說要用appple 對阿 可是不能merge 現在又說EasyBus 有問題\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Urls.java	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ app/src/main/java/com/example/easybus/Urls.java	(date 1628584575137)
@@ -3,8 +3,8 @@
 import java.net.UnknownHostException;
 
 public class Urls {
-    //private static InetAddress ip;/////urllll
-    public static String url1 = "http://172.20.10.3";
+    //private static InetAddress ip;/////
+    public static String url1 = "http://10.0.4.81";
     //public static String url1 = "http://8c708b26959c.ngrok.io";
     public static void main(String args[]) {
 
Index: .idea/runConfigurations.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RunConfigurationProducerService\">\r\n    <option name=\"ignoredProducers\">\r\n      <set>\r\n        <option value=\"com.android.tools.idea.compose.preview.runconfiguration.ComposePreviewRunConfigurationProducer\" />\r\n        <option value=\"org.jetbrains.plugins.gradle.execution.test.runner.AllInPackageGradleConfigurationProducer\" />\r\n        <option value=\"org.jetbrains.plugins.gradle.execution.test.runner.TestClassGradleConfigurationProducer\" />\r\n        <option value=\"org.jetbrains.plugins.gradle.execution.test.runner.TestMethodGradleConfigurationProducer\" />\r\n      </set>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/runConfigurations.xml	(revision 47e391a05ab4bfd80e4aae97587f4507c626d8aa)
+++ .idea/runConfigurations.xml	(date 1628661734366)
@@ -3,7 +3,6 @@
   <component name="RunConfigurationProducerService">
     <option name="ignoredProducers">
       <set>
-        <option value="com.android.tools.idea.compose.preview.runconfiguration.ComposePreviewRunConfigurationProducer" />
         <option value="org.jetbrains.plugins.gradle.execution.test.runner.AllInPackageGradleConfigurationProducer" />
         <option value="org.jetbrains.plugins.gradle.execution.test.runner.TestClassGradleConfigurationProducer" />
         <option value="org.jetbrains.plugins.gradle.execution.test.runner.TestMethodGradleConfigurationProducer" />
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_6__04_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_6__04_08__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Merge_at_2021_8_5__04_51__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Merge_at_2021_8_5__04_51__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_5__04_50__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_5__04_50__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Merge_at_2021_8_4__02_20__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Merge_at_2021_8_4__02_20__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_4__02_19__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_8_4__02_19__Default_Changelist_.xml
