Index: app/src/main/java/com/example/easybus/Page61.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\npublic class Page61 extends AppCompatActivity {\r\n    Page61Holder myAdapter;\r\n    static ArrayList<HashMap<String,String>> arrayList1 = new ArrayList<>();\r\n    static ArrayList<HashMap<String,Integer>> arrayList2 = new ArrayList<>();\r\n    RecyclerView recyclerView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page61);\r\n        //隱藏title bar\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();\r\n        //跳回主頁\r\n        ImageButton btn2 = (ImageButton)findViewById(R.id.back);\r\n        btn2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent it1 = new Intent(Page61.this,Page3Activity.class);\r\n                startActivity(it1);\r\n                arrayList1.clear();\r\n                arrayList2.clear();\r\n            }\r\n        });\r\n        int image[] = {R.drawable.busdetails,R.drawable.business};\r\n        final String text[] = {\" 公  車  查  詢 \",\"   上    班   \"};\r\n        for(int i = image.length-1;i>=0;i--){\r\n            HashMap<String,String> hashMap = new HashMap<>();\r\n            hashMap.put(\"busname\",text[i]);\r\n            arrayList1.add(hashMap);\r\n            HashMap<String,Integer> hashMap2 = new HashMap<>();\r\n            hashMap2.put(\"busphoto\",image[i]);\r\n            arrayList2.add(hashMap2);\r\n        }\r\n        recyclerView = findViewById(R.id.recyclerview);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        //recyclerView.addItemDecoration(new DividerItemDecoration(this,DividerItemDecoration.VERTICAL));\r\n        myAdapter = new Page61Holder();\r\n        recyclerView.setAdapter(myAdapter);\r\n        myAdapter.setOnItemClick(new Page61Holder.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(View view, int position) {\r\n                if(arrayList1.get(position).get(\"busname\").equals(\" 公  車  查  詢 \")){\r\n                    Intent it1 = new Intent(Page61.this,Page6Activity.class);\r\n                    startActivity(it1);\r\n                    arrayList1.clear();\r\n                    arrayList2.clear();\r\n                }else{\r\n                    Intent it1 = new Intent(Page61.this,Page62.class);\r\n                    startActivity(it1);\r\n                    arrayList1.clear();\r\n                    arrayList2.clear();\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page61.java	(revision 8a61142f99c2fe1cdbac342560a195144c58afc7)
+++ app/src/main/java/com/example/easybus/Page61.java	(date 1628151474561)
@@ -45,7 +45,7 @@
             }
         });
         int image[] = {R.drawable.busdetails,R.drawable.business};
-        final String text[] = {" 公  車  查  詢 ","   上    班   "};
+        final String text[] = {" 公  車  查  詢 ","   上    班   ","   搭    車   "};
         for(int i = image.length-1;i>=0;i--){
             HashMap<String,String> hashMap = new HashMap<>();
             hashMap.put("busname",text[i]);
Index: app/src/main/java/com/example/easybus/Page5011Activity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.easybus;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.BitmapDescriptorFactory;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.Marker;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.maps.model.Polyline;\r\nimport com.google.android.gms.maps.model.PolylineOptions;\r\n\r\nimport java.io.IOException;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport tw.edu.pu.s1071481.module.DirectionFinder;\r\nimport tw.edu.pu.s1071481.module.DirectionFinderListener;\r\nimport tw.edu.pu.s1071481.module.Route;\r\n\r\npublic class Page5011Activity extends FragmentActivity implements OnMapReadyCallback, DirectionFinderListener{\r\n\r\n    String origin,destination;\r\n    private static final String TAG = \"Page5011Activity\";\r\n    private GoogleMap mMap;\r\n    private EditText mEtOrigin,mEtDestination;\r\n    private ImageButton mBtnFindPath,mBusInfo;\r\n    private ProgressDialog progressDialog;\r\n    private List<Marker> originMarkers = new ArrayList<>();\r\n    private List<Marker> destinationMarkers = new ArrayList<>();\r\n    private List<Polyline> polylinePaths = new ArrayList<>();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_page5011);\r\n\r\n        mBtnFindPath=(ImageButton)findViewById(R.id.btnFindPath);\r\n        mBusInfo=(ImageButton)findViewById(R.id.busInfo);\r\n        mEtOrigin=(EditText)findViewById(R.id.etOrigin);\r\n        mEtDestination=(EditText)findViewById(R.id.etDestination);\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.mapView);\r\n        mapFragment.getMapAsync(this);\r\n\r\n        mBtnFindPath.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                sendRequest();\r\n            }\r\n        });\r\n        mBusInfo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                sendRequest2();\r\n            }\r\n        });\r\n    }\r\n\r\n    public void sendRequest(){\r\n        origin = mEtOrigin.getText().toString().trim();\r\n        destination = mEtDestination.getText().toString().trim();\r\n        if(origin.isEmpty()){\r\n            Toast.makeText(this, \"請輸入起點\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }else if(destination.isEmpty()){\r\n            Toast.makeText(this, \"請輸入目的地\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        try{\r\n            new DirectionFinder(this,origin,destination).execute();\r\n        }catch(UnsupportedEncodingException e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void sendRequest2(){\r\n        origin = mEtOrigin.getText().toString().trim();\r\n        destination = mEtDestination.getText().toString().trim();\r\n        if(origin.isEmpty()){\r\n            Toast.makeText(this, \"請輸入起點\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }else if(destination.isEmpty()){\r\n            Toast.makeText(this, \"請輸入目的地\", Toast.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n        try{\r\n            Intent it=new Intent(Page5011Activity.this,Page5012Activity.class);\r\n            Bundle bundle = new Bundle();\r\n            //傳值(origin,destination)\r\n            bundle.putString(\"origin2\",origin);\r\n            bundle.putString(\"destination2\",destination);\r\n            it.putExtras(bundle);\r\n            startActivity(it);\r\n        }catch(Exception e){\r\n            Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n\r\n        // Add a marker in Sydney and move the camera\r\n        LatLng school = new LatLng(24.225431, 120.577063);\r\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(school,18));\r\n        originMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                .title(\"靜宜大學\")\r\n                .position(school)));\r\n\r\n        mMap.getUiSettings().setZoomControlsEnabled(true);  //右下角的放大縮小功能\r\n        mMap.getUiSettings().setCompassEnabled(true);   //左上角的指南針，要兩指旋轉\r\n        mMap.getUiSettings().setMapToolbarEnabled(true);    //右下角的導覽及開啟Google Map功能\r\n\r\n        Log.d(TAG,\"最高放大層級：\"+mMap.getMaxZoomLevel());\r\n        Log.d(TAG,\"最低放大層級：\"+mMap.getMinZoomLevel());\r\n        if(ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this,Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED){\r\n            return;\r\n        }\r\n\r\n        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);\r\n        mMap.setMyLocationEnabled(true);    //右上角的定位功能\r\n    }\r\n\r\n    public void onDirectionFinderStart(){\r\n        progressDialog=ProgressDialog.show(this,\"請稍等\",\"正在規劃路線...\",true);\r\n\r\n        if(originMarkers != null){\r\n            for(Marker marker:originMarkers){\r\n                marker.remove();\r\n            }\r\n        }\r\n        if(destinationMarkers != null){\r\n            for(Marker marker:destinationMarkers){\r\n                marker.remove();\r\n            }\r\n        }\r\n        if(polylinePaths != null){\r\n            for(Polyline polyline:polylinePaths){\r\n                polyline.remove();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDirectionFinderSuccess(List<Route> routes) {\r\n        progressDialog.dismiss();\r\n        polylinePaths=new ArrayList<>();\r\n        originMarkers=new ArrayList<>();\r\n        destinationMarkers=new ArrayList<>();\r\n\r\n        for(Route route:routes){\r\n            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(route.startLocation,16));\r\n\r\n            originMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                    .title(route.startAddress)\r\n                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.a))\r\n                    .position(route.startLocation)));\r\n\r\n            destinationMarkers.add(mMap.addMarker(new MarkerOptions()\r\n                    .title(route.endAddress)\r\n                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.b))\r\n                    .position(route.endLocation)));\r\n\r\n            PolylineOptions polylineOptions=new PolylineOptions().\r\n                    geodesic(true).color(Color.BLUE).width(10);\r\n\r\n            for(int i=0;i<route.points.size();i++)\r\n                polylineOptions.add(route.points.get(i));\r\n\r\n            polylinePaths.add(mMap.addPolyline(polylineOptions));\r\n        }\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/easybus/Page5011Activity.java	(revision 8a61142f99c2fe1cdbac342560a195144c58afc7)
+++ app/src/main/java/com/example/easybus/Page5011Activity.java	(date 1628151474551)
@@ -6,6 +6,7 @@
 import android.Manifest;
 import android.app.ProgressDialog;
 import android.content.Intent;
+import android.content.SharedPreferences;
 import android.content.pm.PackageManager;
 import android.graphics.Color;
 import android.os.Bundle;
@@ -38,7 +39,7 @@
 
 public class Page5011Activity extends FragmentActivity implements OnMapReadyCallback, DirectionFinderListener{
 
-    String origin,destination;
+    String origin,destination,getmail;
     private static final String TAG = "Page5011Activity";
     private GoogleMap mMap;
     private EditText mEtOrigin,mEtDestination;
@@ -73,6 +74,10 @@
                 sendRequest2();
             }
         });
+
+        SharedPreferences email = getSharedPreferences("email",MODE_PRIVATE);
+        getmail=email.getString("Email","");
+        System.out.println(getmail);
     }
 
     public void sendRequest(){
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_7_28__04_14__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_2021_7_28__04_14__Default_Changelist_.xml
